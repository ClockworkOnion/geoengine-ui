<geoengine-sidenav-header>Symbology Editor</geoengine-sidenav-header>

<mat-dialog-content>
    <form [formGroup]="form">
        <mat-card>
            <mat-card-header>
                <mat-card-title>Area</mat-card-title>
                <mat-card-subtitle>Specify a rectangular region for the download</mat-card-subtitle>
            </mat-card-header>

            <mat-card-content>
                <div fxLayout="row">
                    <mat-form-field appearance="fill">
                        <mat-label>min X</mat-label>
                        <input matInput type="number" formControlName="bboxMinX" />
                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <mat-label>max X</mat-label>
                        <input matInput type="number" formControlName="bboxMaxX" />
                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <mat-label>min Y</mat-label>
                        <input matInput type="number" formControlName="bboxMinY" />
                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <mat-label>max Y</mat-label>
                        <input matInput type="number" formControlName="bboxMaxY" />
                    </mat-form-field>
                </div>

                <button mat-raised-button color="accent" (click)="selectBox()">Select region on the map</button>
            </mat-card-content>
        </mat-card>

        <mat-card>
            <mat-card-header>
                <mat-card-title>Time</mat-card-title>
                <mat-card-subtitle>Specify a time selection for the download</mat-card-subtitle>
            </mat-card-header>

            <mat-card-content>
                <geoengine-time-interval-input #timeInterval></geoengine-time-interval-input>
            </mat-card-content>
        </mat-card>

        <mat-card>
            <mat-card-header>
                <mat-card-title>Resolution</mat-card-title>
                <mat-card-subtitle>Specify a resolution for the download</mat-card-subtitle>
            </mat-card-header>

            <mat-card-content>
                <mat-form-field appearance="fill">
                    <mat-label>Input resolution</mat-label>
                    <mat-select formControlName="inputResolution">
                        <mat-option value="source"> Source resolution </mat-option>
                        <mat-option value="value"> Value </mat-option>
                    </mat-select>
                </mat-form-field>

                <div fxLayout="row" *ngIf="form.get('inputResolution')?.value === 'value'">
                    <mat-form-field appearance="fill">
                        <mat-label>Input resolution (x)</mat-label>
                        <input matInput type="number" formControlName="inputResolutionX" />
                        <mat-hint
                            class="error"
                            *ngIf="form.controls.inputResolutionX.errors?.required || form.controls.inputResolutionX.errors?.valueNotLarger"
                        >
                            The x resolution must be a positive number.
                        </mat-hint>
                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <mat-label>Input resolution (y)</mat-label>
                        <input matInput type="number" formControlName="inputResolutionY" />
                        <mat-hint
                            class="error"
                            *ngIf="form.controls.inputResolutionY.errors?.required || form.controls.inputResolutionY.errors?.valueNotLarger"
                        >
                            The y resolution must be a positive number.
                        </mat-hint>
                    </mat-form-field>
                </div>
            </mat-card-content>
        </mat-card>

        <button mat-raised-button color="primary" type="submit" (click)="download()">Download</button>
    </form>
</mat-dialog-content>
